!function(a){a.fn.extend({smoothZoom:function(b){function e(){var c=a(window).height(),d=a(window).width(),e=a("#off-screen").width(),g=a("#off-screen").height(),h=.95*c,i=h/g,j=e*i;a("#lightwrap img").show(),h>g?a("#lightwrap img").animate({height:g,width:e,left:"50%",top:"50%",marginTop:-(g/2),marginLeft:-(e/2)},b.zoominSpeed,b.zoominEasing):j>d?f():a("#lightwrap img").animate({height:h,width:j,left:"50%",top:"2.5%",marginTop:"0",marginLeft:-(j/2)},b.zoominSpeed,b.zoominEasing)}function f(){var c=a("#off-screen").width(),d=a("#off-screen").height(),f=a(window).width(),g=a(window).height(),h=.95*f,i=h/c,j=d*i;a("#lightwrap img").show(),j>d?d>g?e():a("#lightwrap img").animate({height:d,width:c,top:"50%",left:"50%",marginTop:-(d/2),marginLeft:-(c/2)},b.zoominSpeed,b.zoominEasing):j>g?e():a("#lightwrap img").animate({height:j,width:h,top:"50%",left:"2.5%",marginTop:-(j/2),marginLeft:"0"},b.zoominSpeed,b.zoominEasing)}var c={zoominSpeed:800,zoomoutSpeed:400,resizeDelay:400,zoominEasing:"easeOutExpo",zoomoutEasing:"easeOutExpo"},b=a.extend(c,b);a('img[rel="zoom"]').click(function(b){var c=a(this).attr("src"),d=a(this).parent().attr("href"),e=a(this).parent().attr("target"),g=a(this).offset(),h=a(this).width(),i=a(this).height(),j=a(window).scrollTop();a(window).width(),a(window).height(),d&&"#"!=d?d.match("[jpg|png|gif](\\?.*?)?$")?(a("body").append("<div id='lightwrap'><img src="+d+"></div><div id='lightbg'></div><img id='off-screen' src="+d+">"),a("#off-screen").load(function(){a("#lightwrap img").css({width:h,height:i,top:g.top-j,left:g.left}),f(),a("#lightbg").fadeIn()}),a(this).attr("id","lightzoomed")):"_blank"==e?window.open(d,"_blank"):window.location=d:(a("body").append("<div id='lightwrap'><img src="+c+"></div><div id='lightbg'></div><img id='off-screen' src="+c+">"),a("#off-screen").load(function(){a("#lightwrap img").css({width:h,height:i,top:g.top-j,left:g.left}),f(),a("#lightbg").fadeIn()}),a(this).attr("id","lightzoomed")),b.preventDefault()}),a(document.body).on("click","#lightwrap, #lightbg",function(){var d=a("#lightzoomed").offset(),e=a("#lightzoomed").width(),f=a("#lightzoomed").height(),g=a(window).scrollTop();a("#lightbg").fadeOut(500),a("#lightwrap img").animate({height:f,width:e,top:d.top-g,left:d.left,marginTop:"0",marginLeft:"0"},b.zoomoutSpeed,b.zoomoutEasing,function(){a("#lightwrap, #lightbg, #off-screen").remove(),a("#lightzoomed").removeAttr("id")})});var d=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}();a(window).resize(function(){d(function(){f()},b.resizeDelay)})}})}(jQuery);